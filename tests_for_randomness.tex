%乱数生成器から出力された系列が乱数が持つべき性質を満たしているのかを確認・テストすることは重要な問題である，
%工学的な応用の場面で用いられる乱数においては，統計的な性質を満たしていればよい．一方，暗号で用いられる乱数においては，激しい攻撃にも耐えられる必要がある
%暗号で用いられる系列は，予測不可能性という性質が必要である．すなわち，系列の部分列から次のビットが何であるかを予測することができない系列であることが求められる．しかしながら，与えられた系列がそのような性質を満たすのかどうかを調べることは困難である．
As seen in the previous subsection, it is a hard task to evaluate whether a finite binary sequence satisfies ``randomness'' or not. In practice, a statistical hypothesis test has been extensively considered to evaluate the randomness of a binary sequence. A number of statistical tests has been proposed. In most of the cases, the randomness is evaluated by multiple statistical tests since one statistical test is designed to detect the specific defect of a binary sequence and cannot detect other types of defects.
%
%前節で述べた定義を満たしているかどうかを確かめればよいと思われるかもしれないが，それらの定義は無限列に対して定義されているので現実的ではない．
%コルモゴロフ複雑性を用いてランダム性を判定すればよいと思われるかもしれないが，計算することができない．
%
%そこで，暗号用途に適した特性を持つような擬似乱数の定義として「暗号学的擬似乱数」が提唱された．それは次のようなものである．
%この定義と同値な条件として，Yaoによる次ビット予測テストによる特徴づけがある．実際に，このテストを行うことは現実的ではない．なぜなら...．
%そこで通常は，有限個の統計的検定を複数個組み合わせたtest suiteによってrandomnessを判定することが考えられる． 
%
\par
There are some test suites such as TestU01 test suite \cite{l2007testu01}, the BSI (Bundesamt fr Sicherheit in der Informationstechnik) test suite \cite{schindler1999functionality,killmann2001proposal}, Marsaglia's DIEHARD test suite, Crypt-X statistical test suite \cite{caelli1992crypt} and FIPS 140-2 test suite \cite{fips2001140}.
\par
%
NIST Special Publication 800-22 (NIST SP 800-22) \cite{rukhin2001statistical,bassham2010sp} proposed by National Institute of Standards and Technology (NIST) is one of the standard statistical test suites that was originally used for selecting Advanced Encryption Standard (AES) \cite{rijmen2001advanced}. 
%
%帰無仮説は与えられた系列は乱数である．もっと詳しく言うと，与えられた系列は{0,1}^n上の一様分布から生成された，である．
NIST SP 800-22 consists of fifteen kinds of statistical tests, and the null hypothesis $\mathcal{H}_0$ is that a given binary sequence is truly random. We can regard a $n$-bit given binary sequence as a sample from a uniform distribution on $\{0,1\}^n$.
 % a given sequence of length $n$ is considered to be generated by a uniform distribution on $\{0,1\}^{n}$. 
Associated with the null hypothesis, the alternative hypothesis $\mathcal{H}_1$ is that the sequence is not random.
%NISTにおける検定方法の概略を述べる．まず，与えられた系列から検定統計量と呼ばれる実数を計算する．その値を理想的な乱数の場合における値と比較することによって，ランダム性を評価する．
% According to the latest version of NIST SP 800-22 Revision 1a \cite{bassham2010sp}, the process of every test is basically the same and described as follows. 
NIST SP 800-22 specifies the evaluating process as follows.
For a tested binary sequence of length $n$, a p-value is computed. If p-value is equal or larger than $\alpha$, the null hypothesis $\mathcal{H}_0$ is accepted, where $\alpha$ is the significance level of the test. Repeat the same procedure for $m$ sample sequences and obtain $m$ p-values. 
%
% NIST SP 800-22 recommends to perform the following two additional statistical tests for the $m$ p-values.
NIST SP 800-22 recommends to perform additional statistical tests for the $m$ p-values.
The following two tests are specified under the null hypothesis that $m$ p-values independently follow a uniform distribution in $[0,1]$.
% To examine more in detail, the following two additional two statistical tests, ``Proportion test'' and ``Uniformity test'' , are recommended in \cite{bassham2010sp} to execute:
\begin{enumerate}
  %各系列に対してp>=alphaなる確率は，1-alphaで与えらえる．この試行をｍ回行うと，平均でm(1-alpha)，分散malpha(1-alpha)となる．
  \item (Proportion test) Let $m_p$ be the number of sequences whose p-value satisfies p-value $\geq \alpha$ for the given $m$ sequences. The null hypothesis is rejected if $m_p$ lies outside the significant interval $[m(1-\alpha)-\xi\sigma, m(1-\alpha)+\xi\sigma]$, where $m(1-\alpha)$ and $\sigma = \sqrt{m\alpha(1-\alpha)}$ is the expected value and  standard deviation of $m_p$, respectively.
  %
  % \item Let $m_p$ be the number of sequences whose p-value satisfies p-value $\geq \alpha$ for given $m$ sequences. If $m$ is large enough, $m_p/m$ can be approximated by a normal random variable, with expected value $1-\alpha$ and standard deviation $\sigma=\sqrt{\alpha(1-\alpha)/m}$. The null hypothesis $\mathcal{H}_0$ is rejected if $m_p/m$ lies outside the significant interval $[1-\alpha-3\sigma,1-\alpha+3\sigma]$.
  %
  \item (Uniformity test) The distribution of the $m$ p-values against the uniform distribution on $[0,1]$ is tested with a Chi-Square goodness of fit test in $k$ bins. This is again a statistical test, which yields a level-two p-value $p_T$. Given a significance level $\alpha_T$, the null hypothesis is rejected if $p_T \leq \alpha_T$.
\end{enumerate}
%
NIST SP 800-22 recommends to choose parameters as $m=1000,\,\alpha=0.01,\,\xi=3, \,k=10$ and $\alpha_T=0.0001$.
% Parameters are recommended in \cite{bassham2010sp} to choose as $m=1000,\,\alpha=0.01,\,k=10$ and $\alpha_T=0.0001$. 
% Repeat the same procedure for $m$ tested sequences and compute $m$ p-value. The recommendation is $\alpha=0.01$. Count the number of tested sequences such that p-value $\geq \alpha$ and define by $m_p$. Then, the assumption under of randomness, $m_p$ follows $\mathrm{Bin}(m,1-\alpha)$, which is approximated by $\mathcal{N}(m(1-\alpha),m\alpha(1-\alpha))$, and $m_p/m$approximately follows $\mathcal{N}(1-\alpha,\frac{\alpha(1-\alpha)}{m})$. Hence, the range of acceptable rate is determined by
% \begin{align}
%    1-\alpha-3\sqrt{\frac{\alpha(1-\alpha)}{m}} < \frac{m_p}{m} < 1-\alpha+3\sqrt{\frac{\alpha(1-\alpha)}{m}},
% \end{align} 
% and it is concluded that tested sequences are non-random if the above proportion does not hold. In the next place, the distribution of p-values are considered. The p-value of truly random sequences distributes uniformly over $(0,1)$. 
%
% \par
% There are TestU01 test suite \cite{l2007testu01}, the BSI (Bundesamt fr Sicherheit in der Informationstechnik) test suite \cite{schindler1999functionality,killmann2001proposal}, Marsaglia's DIEHARD test suite, Crypt-X statistical test suite \cite{caelli1992crypt} and FIPS 140-2 test suite \cite{fips2001140} as an example of other statistical test suits for evaluating a random number generator.
% Other statistical test suites for evaluating a random number generator are TestU01 test suite \cite{l2007testu01}, the BSI (Bundesamt fr Sicherheit in der Informationstechnik) test suite \cite{schindler1999functionality,killmann2001proposal}, Marsaglia's DIEHARD test suite, Crypt-X statistical test suite \cite{caelli1992crypt}, FIPS 140-2 test suite \cite{fips2001140}, etc. 
%
% Note that the binary sequence being tested cannot be regarded as random even if it passes all the 15 statistical tests. 
%
% Since it is hard to define the ``randomness'', hypothesis tests are carried out by setting several evaluation criteria.
% Consequently, the randomness of sequences cannot be guaranteed by the statistical tests, though non-randomness sequences can be rejected.
% 
%-----------------------------------------------------------------------------------------------%
%-----------------------------------------------------------------------------------------------%
%-----------------------------------------------------------------------------------------------%
% \subsection{Notation}
% The notation $\mathbb{N},\,\mathbb{R}$ are the set of natural numbers and the set of real numbers, respectively.
% A symbol $B$ denotes the set $\{0,1\}$ and $B^n$ denotes the set of binary strings of length $n$. For a binary sequence $x^n=x_1,x_2,\dots,x_n$, a symbol $b_k$ denotes the $k$-th substring $b_k=x_{L(k-1)+1},x_{L(k-1)+2},,\dots,x_{Lk}$ 
%-----------------------------------------------------------------------------------------------%
%-----------------------------------------------------------------------------------------------%
